# Ticket Booking Application

Это приложение предназначено для управления покупкой билетов на различные транспортные средства и включает функционал для создания и пополнения счетов пользователей.

## Основные компоненты

- **AccountService**: Управляет созданием и пополнением счетов для пассажиров.
- **PassengersService**: Управляет созданием и получением информации о пассажирах.
- **TicketsService**: Обрабатывает покупку билетов, проверяет наличие средств на счете, списывает стоимость билета со счета.
- **VehicleService**: Управляет транспортными средствами и ценой билетов на них.

## Функционал

1. **Создание счета для пассажира**:
    - Метод `Create` в `AccountService` создает новый счет для указанного пассажира.
    - При успешном создании возвращается `accountId`.

2. **Пополнение счета**:
    - Метод `TopUpAccount` в `AccountService` позволяет пополнить баланс счета на определенную сумму.

3. **Получение информации о пассажирах**:
    - Метод `GetAll` в `PassengersService` возвращает всех зарегистрированных пассажиров с их счетами и билетами.
    - Метод `GetById` позволяет получить информацию о конкретном пассажире по его `id`.

4. **Покупка билета**:
    - Метод `Create` в `TicketsService` создает билет для пассажира на выбранное транспортное средство.
    - Перед покупкой билета проверяется наличие средств на счете пассажира, затем стоимость списывается со счета.

5. **Добавление транспортного средства**:
    - Метод `Create` в `VehicleService` добавляет новое транспортное средство с заданной стоимостью билета.

## Модели данных

1. **Account**:
    - `Id`: Идентификатор счета.
    - `Balance`: Баланс счета.
    - `OwnerId`: Владелец счета (связь с `Passenger`).

2. **Passenger**:
    - `Id`: Идентификатор пассажира.
    - `Name`: Имя пассажира.
    - `Accounts`: Связь с счетами пассажира.
    - `Tickets`: Связь с билетами пассажира.

3. **Ticket**:
    - `Id`: Идентификатор билета.
    - `OwnerId`: Владелец билета (связь с `Passenger`).
    - `VehicleId`: Идентификатор транспортного средства.
    - `Price`: Стоимость билета.

4. **Vehicle**:
    - `Id`: Идентификатор транспортного средства.
    - `Name`: Название транспортного средства.
    - `TicketPrice`: Стоимость билета для этого транспортного средства.

## Настройка базы данных

1. **Миграции**:
    - Для добавления таблиц и установления связей используйте миграции Entity Framework.
    - Команды для создания и применения миграций:
      ```bash
      dotnet ef migrations add InitialCreate
      dotnet ef database update
      ```


